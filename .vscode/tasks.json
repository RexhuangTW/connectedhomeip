{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "RT matter dev setup",
            "type": "shell",
            "command": "echo 'Env setup finished'",
            "dependsOrder": "sequence",
            "dependsOn": [
                "RT matter image build (Step I)", 
                "RT matter container build (Step II)", 
                "RT matter container env setup (Step III)"
            ],
        },
        {
            "label": "RT matter image build (Step I)",
            "type": "shell",
            "command": "docker build -f .\\.devcontainer\\RT582_Dockerfile -t rafael_matter . --no-cache",
            "group": "build",
        },
        {
            "label": "RT matter container build (Step II)",
            "type": "shell",
            "command": "docker run -i -d --name RT_matter_builder -v D:\\workspace\\connectedhomeip:/var/chip rafael_matter",
            "group": "build",
        },
        {
            "label": "RT matter container env setup (Step III)",
            "type": "shell",
            "command": "docker exec RT_matter_builder bash /var/chip/scripts/activate.sh",
            "group": "build",
        },
        {
            "label": "Build RT lighting example",
            "type": "shell",
            "command": "docker exec RT_matter_builder /var/chip/scripts/examples/gn_rt582_example.sh /var/chip/examples/lighting-app/rt582 /var/chip/out/lighting-app",
            "group": "build",
            "problemMatcher": { 
                "base": "$gcc" 
            }
        },
        {
            "label": "Build RT light-switch example",
            "type": "shell",
            "command": "docker exec RT_matter_builder /var/chip/scripts/examples/gn_rt582_example.sh /var/chip/examples/light-switch-app/rt582 /var/chip/out/light-switch-app",
            "group": "build",
            "problemMatcher": { 
                "base": "$gcc" 
            }
        },
    ]
}
